<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Phillip Geo / BareetDesign</title>
  <link rel="stylesheet" href="style.css">
  <link rel="icon" href="geoportofolio.png" type="image/png">
</head>
<body>
<header>
  <div class="logo">
    <a href="index.html" id="site-title" style="text-decoration:none;color:inherit;">Phillip Geo / BareetDesign</a>
  </div>
  <nav>
    <a href="index.html" class="active">Projekter</a>
    <a href="about.html">Om</a>
    <a href="contact.html">Kontakt</a>
    <a href="admin.html" class="admin-link">âš™</a>
  </nav>
</header>

<main>
  <section id="projects-grid" class="grid">
    <p>Loading projects...</p>
  </section>
</main>

<footer>
  <span>&copy; 2025 Phillip Geo / BareetDesign</span>
  <div class="footer-social">
    <a href="mailto:phillipgeo7@gmail.com">
      <img src="icons/mail.png" class="social-icon" alt="Mail">
      <span>phillipgeo7@gmail.com</span>
    </a>
    <a href="tel:+4593956339">
      <img src="icons/phone.png" class="social-icon" alt="Phone">
      <span>+45 93 95 63 39</span>
    </a>
    <a id="footer-linkedin" href="#" target="_blank">
      <img src="icons/linkedin.png" class="social-icon" alt="LinkedIn">
      <span>LinkedIn</span>
    </a>
    <a id="footer-instagram" href="#" target="_blank">
      <img src="icons/instagram.png" class="social-icon" alt="Instagram">
      <span>Instagram</span>
    </a>
  </div>
</footer>

<script type="module">
import { createClient } from 'https://esm.sh/@supabase/supabase-js'

const SUPABASE_URL = "https://tuogdyemsfdmhxrvmrlq.supabase.co";
const SUPABASE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR1b2dkeWVtc2ZkbWh4cnZtcmxxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTgwMjQ5OTAsImV4cCI6MjA3MzYwMDk5MH0.yHeM8tkZuzA8PuooVIOrDtdgCTS3jfuXLzQ55-235NU";
const supabase = createClient(SUPABASE_URL, SUPABASE_KEY);

// Hent site title og sociale medier
async function loadSiteData() {
  try {
    const { data: siteData, error } = await supabase
      .from('site_content')
      .select('*')
      .eq('id', 1)
      .single();

    if (error) throw error;

    if (siteData) {
      document.getElementById('site-title').textContent = siteData.siteTitle;

      // Kun LinkedIn og Instagram opdateres fra databasen
      document.getElementById('footer-linkedin').href = siteData.contactLinkedin || '#';
      document.getElementById('footer-instagram').href = siteData.contactInstagram || '#';

      if (siteData.footerLinkedinIcon) document.querySelector('#footer-linkedin img').src = siteData.footerLinkedinIcon;
      if (siteData.footerInstagramIcon) document.querySelector('#footer-instagram img').src = siteData.footerInstagramIcon;
    }
  } catch (e) {
    console.error('Error loading site content:', e);
  }
}

// Hent projekter
async function loadProjects() {
  try {
    const { data: projects, error } = await supabase
      .from('projects')
      .select('*')
      .order('created_at', { ascending: false });

    const grid = document.getElementById('projects-grid');
    grid.innerHTML = '';

    if (error) throw error;

    if (projects && projects.length > 0) {
      projects.forEach(p => {
        const a = document.createElement('a');
        a.href = p.link || '#';
        a.className = 'project';

        const img = document.createElement('img');
        img.src = p.image_url || 'images/placeholder.png';
        img.alt = p.title;

        const content = document.createElement('div');
        content.className = 'project-content';

        const h3 = document.createElement('h3');
        h3.textContent = p.title;

        const url = document.createElement('div');
        url.className = 'project-url';
        url.textContent = p.link || 'No link';

        content.appendChild(h3);
        content.appendChild(url);
        a.appendChild(img);
        a.appendChild(content);

        grid.appendChild(a);
      });
    } else {
      grid.innerHTML = '<p>Ingen projekter fundet.</p>';
    }
  } catch (e) {
    console.error('Error loading projects:', e);
  }
}

loadSiteData();
loadProjects();
</script>
</body>
</html>
